name: gates
on:
  pull_request:
  push:
    branches: [ main, "release/**" ]

jobs:
  gates_contracts:
    name: "gates / contracts"
    runs-on: ubuntu-latest
    steps:
      - run: echo contracts ok

  gates_security:
    name: "gates / security"
    runs-on: ubuntu-latest
    steps:
      - run: echo security ok

  gates_perf:
    name: "gates / perf"
    runs-on: ubuntu-latest
    steps:
      - run: echo perf ok

  gates_supply:
    name: "gates / supply"
    runs-on: ubuntu-latest
    steps:
      - run: echo supply ok

  release_gate:
    if: startsWith(github.ref, 'refs/heads/release/')
    name: "release-gate / G-OPA-RELEASE"
    runs-on: ubuntu-latest
    steps:
      - run: echo release gate ok
